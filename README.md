# Powerless PC Simulator

CPU実験2015

## ビルド
```sh
> make
```

bin/ 以下に生成されます

## 実行

```sh
> ./bin/sim target.bin
```

## テストファイルについて

test/ 以下にテストファイル(\*.txt)があります。makeすることで同じディレクトリに実行用のバイナリ\*.binが生成されるので、それらをシュミレータで実行することができます。
テストファイルは0, 1で書かれた命令列です。任意の空白と行中のセミコロン以降は無視されます。
実行用バイナリ生成に使用されるtxt2binは2進数で書かれた命令をそのままバイナリ化しますが、最終的にはコンパイラが出力してFPGAに焼くものと同じ形式で出力し、シミュレータ上で実行できるようにする予定です。

## 対話モード(interactive mode)について

-i オプションをつけることでシミュレータは対話モードになります。
対話モードで使用できるコマンドは以下です:

- p : print       出力: レジスタに格納されたデータ、命令などを出力する
	- p r3 : GPR3のデータ
	- p ir : 実行命令
	- p cr : 条件レジスタ
	- p lr : リンクレジスタ
- s : step        ステップ実行: 次の命令を実行し、再び対話モードに移行する
- d : disassemble 逆アセンブル: 次の命令を逆アセンブルして表示する
- r : run         実行: ブレークポイント(未実装)に入るか終了するまで続けて命令を実行する
- q : quit        終了
- h : help        ヘルプ
